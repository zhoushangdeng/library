import{d as T,u as w,a as I,r as V,c as x,_ as M,b as z,e as l,o as u,f as $,g as r,h as i,w as c,F as k,i as g,j as b,k as y,t as C,l as B,m as O,n as N,p as F,q as R,T as H,s as D,K}from"./index.3f9d660e.js";const j=T({setup(){const e=w(),t=I(),m=e.state.userInfo.userName,{ctx:f}=B(),d=o=>t.push(o),_=(o,a)=>{e.state.userInfo.cachedMenu.map((v,p)=>{v.path===o&&o!=="/Home"&&(e.state.userInfo.cachedMenu.splice(p,1),o===a&&t.push(e.state.userInfo.cachedMenu[p-1].path))})};V([]);const h=o=>{e.state.userInfo.cachedMenu.map(a=>{a.path==o.props.name&&(e.dispatch("asyncgetdefaultActive",a.id),t.push(a.path))})};return{signOut:()=>{z(),t.push("/login")},cachedMenu:x(()=>e.state.userInfo.cachedMenu),clickRoute:d,userName:m,removeTab:_,tabClick:h,matchedArr:x(function(){let o=[],a=[];return console.log(f.$router),o.filter(v=>{a.includes(v)||a.push(v)}),a})}}}),q={class:"nav"},S={class:"item1"},E={class:"item2"},L={style:{display:"flex","justify-content":"center"}},U=y(" \u9000\u51FA\u767B\u5F55 ");function G(e,t,m,f,d,_){const h=l("el-breadcrumb-item"),n=l("el-breadcrumb"),o=l("el-button"),a=l("el-popover"),v=l("el-tab-pane"),p=l("el-tabs");return u(),$("div",null,[r("div",q,[r("div",S,[i(n,{separator:"/",style:{"margin-top":"3px"}},{default:c(()=>[(u(!0),$(k,null,g(e.matchedArr,(s,A)=>(u(),b(h,{key:A},{default:c(()=>[y(C(s),1)]),_:2},1024))),128))]),_:1})]),r("div",E,[i(a,{placement:"bottom",trigger:"click",width:90},{reference:c(()=>[i(o,{type:"text"},{default:c(()=>[y(C(e.userName),1)]),_:1})]),default:c(()=>[r("div",L,[i(o,{type:"primary",onClick:e.signOut,size:"small"},{default:c(()=>[U]),_:1},8,["onClick"])])]),_:1})])]),r("div",null,[i(p,{modelValue:e.$route.path,"onUpdate:modelValue":t[0]||(t[0]=s=>e.$route.path=s),type:"card",closable:"",onTabRemove:t[1]||(t[1]=s=>e.removeTab(s,e.$route.path)),onTabClick:e.tabClick,size:"mini"},{default:c(()=>[(u(!0),$(k,null,g(e.cachedMenu,s=>(u(),b(v,{key:s.id,label:s.name,name:s.path},null,8,["label","name"]))),128))]),_:1},8,["modelValue","onTabClick"])])])}var J=M(j,[["render",G]]);const P=T({name:"Menu",components:{},setup(){const e=V({menusTree:[],tableData:[]}),t=w(),m=O(!1);O("1");const f=n=>{},d=I(),_=n=>{n={path:"/"+n.menusName,name:n.title,meta:{title:n.title,keepAlive:!0},component:n.path,id:n.id},t.state.userInfo.cachedMenu.filter(a=>n.name===a.name).length==0&&n.name!=="\u9996\u9875"&&t.dispatch("addKeepAlive",n),t.dispatch("asyncClickRoute",n),t.dispatch("asyncgetdefaultActive",n.id),d.push(n.path)};return(async()=>{const n=await N({token:F()});e.menusTree=n})(),{isCollapse:m,handleOpen:f,clickRoute:_,state:e,defaultActive:x(()=>t.state.userInfo.defaultActive)}}}),Q={class:"Menu"},W={class:"menu"},X={class:"footer"};function Y(e,t,m,f,d,_){const h=l("el-menu-item"),n=l("el-menu-item-group"),o=l("el-submenu"),a=l("el-menu"),v=l("el-button");return u(),$("div",Q,[r("div",W,[i(a,{uniqueOpened:!0,"default-active":e.defaultActive,class:"el-menu-vertical-demo",onOpen:e.handleOpen,"background-color":"#2e3035","text-color":"#fff","active-text-color":"#ffd04b",collapse:e.isCollapse,"collapse-transition":!0,style:{height:"calc(100vh - 40px)"}},{default:c(()=>[(u(!0),$(k,null,g(e.state.menusTree,p=>(u(),b(o,{key:p.id,index:p.id},{title:c(()=>[r("i",{class:R(p.icon)},null,2),r("span",null,C(p.title||""),1)]),default:c(()=>[i(n,null,{default:c(()=>[(u(!0),$(k,null,g(p.children,s=>(u(),b(h,{onClick:A=>e.clickRoute(s,s.index),key:s.id,index:s.id},{default:c(()=>[r("i",{class:R(s.icon)},null,2),y(C(s.title),1)]),_:2},1032,["onClick","index"]))),128))]),_:2},1024)]),_:2},1032,["index"]))),128))]),_:1},8,["default-active","onOpen","collapse"])]),r("div",X,[i(v,{icon:e.isCollapse?"el-icon-s-unfold":"el-icon-s-fold",onClick:t[0]||(t[0]=p=>e.isCollapse=!e.isCollapse),size:"medium"},null,8,["icon"])])])}var Z=M(P,[["render",Y]]);const ee={},ne={style:{width:"100%",height:"100%"}};function te(e,t){const m=l("router-view");return u(),$("div",ne,[i(m,null,{default:c(({Component:f})=>[(u(),b(K,{max:10},[i(H,{name:"el-zoom-in-top"},{default:c(()=>[(u(),b(D(f)))]),_:2},1024)],1024))]),_:1})])}var oe=M(ee,[["render",te]]);const se=T({components:{Header:J,Menu:Z,Main:oe},setup(){const e=I();return{clickRoute:d=>e.push(d),handleOpen:(d,_)=>{console.log(d,_)},handleClose:(d,_)=>{console.log(d,_)}}}}),ae={class:"layout"},le={class:"left"},ce={class:"right"},ue={class:"header"},re={class:"main"};function ie(e,t,m,f,d,_){const h=l("Menu"),n=l("Header"),o=l("Main");return u(),$("div",ae,[r("div",le,[i(h)]),r("div",ce,[r("div",ue,[i(n)]),r("div",re,[i(o)])])])}var pe=M(se,[["render",ie]]);export{pe as default};
